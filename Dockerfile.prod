FROM golang:1.17-alpine as build

RUN apk --no-cache add curl

ENV ENV=production

WORKDIR /go/src/app

COPY . .

RUN go build -o ip .

EXPOSE 80

HEALTHCHECK CMD curl -f http://localhost:80/healthz || exit 1

CMD ["./ip"]
